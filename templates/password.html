{% extends 'base.html' %} {% block style %}
<link rel="stylesheet" href="{{url_for('static', filename='assets/css/style.css')}}">
<link rel="stylesheet" href="{{url_for('static', filename='assets/css/new.css')}}"> {% endblock %} {% block body %} {% include
'guest.html' %} {% endblock %} {% block main %}
<main>
    <form action="{{url_for('change_password', token=token, user_id=user_id)}}" method="POST" id='form'>
        <div class="container">
            <div class="form flex row-lg row-md column-sm form-card">
                <div class="right expand column-all flex justify-center align-center">
                    <h3 class="form-title mb-3">Login<br> <span>Change your Password.</span> </h3>
                     {% if error == None %}
                    <span id="error" class="alert " role="alert"></span>
                    {% else %}
                    <span id="error" class="alert alert-danger" role="alert">{{error}}</span>
                    {% endif %}
                    <div class="input-group flex column-all justify-center">
                        <input type="password" name="password" id="password">
                        <input type="password" name="m_password" id="m_password">
                        <button id="load" class="btn primary md">
                            <i id='spin'></i>
                            Submit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</main>
{% endblock %}

{% block script %}
<script>
    var btn = document.getElementById('load');
    var spin = document.getElementById('spin');
    $('#form').submit(function (e) {       
        error.className = 'alert ' 
        btn.disabled = true;
        spin.className = 'fa fa-spinner fa-spin';    
        var password = document.getElementById('password');
        var m_password = document.getElementById('m_password');
        var error_box = document.getElementById('error');
        var willReturn = true;
        if (password.value.length < 8){
            error.innerText = 'Password too short'
            error.className +=  'alert-danger'
            return willReturn;
        }
        if (password.value !== m_password.value){
            error.innerText = 'Passwords do not match'
            error.className += 'alert-danger'
            return willReturn
        }        
        return willReturn
    })

</script>
{% endblock %}